<!doctype html>
<html>
<head>
    <meta charset="utf-8">
    <title>pow-edit</title>
    <link rel="stylesheet" href="../build/pow-edit.css">
</head>
<body ng-controller="AppController">

<bg-splitter orientation="horizontal" class="content">
    <bg-pane min-size="150" class="">
        <pane-item name="Files" class="files">
            <treecontrol tree-model="mount" node-children="children" on-selection="selectFile(node)">{{node.label}}</treecontrol>
        </pane-item>
    </bg-pane>
    <bg-pane min-size="200">
        <document-view type="getDocumentType()" source="document"></document-view>
    </bg-pane>
</bg-splitter>
<script type="text/javascript">
    /* Based on: http://jeremyhixon.com/snippet/loading-javascript-files-asynchronously/ */
    function loadScripts(urls,success){
        var toLoad = urls.slice(0);
        function _next(){
            if(toLoad.length === 0){
                return success && success();
            }
            var url = toLoad.shift();
            var script = document.createElement('script');
            script.src = url;
            script.async = !0;
            var head = document.getElementsByTagName('head')[0];
            script.onload = script.onreadystatechange = script.onerror = function(d){
                if (!script.readyState || script.readyState == 'loaded' || script.readyState == 'complete') {
                    script.onerror = script.onload = script.onreadystatechange = null;
                    head.removeChild(script);
                    _next();
                }
            };
            head.appendChild(script);
        }
        _next();
    }
    window.onload = function() {
        var platform = (typeof require !== 'undefined') ? '../build/pow-edit.nw.js' : '../build/pow-edit.browser.js';
        loadScripts([
            "../bower_components/underscore/underscore.js",
            "../bower_components/jquery/dist/jquery.js",
            "../bower_components/backbone/backbone.js",
            "../assets/vendor/ace/src-min-noconflict/ace.js",
            "../bower_components/showdown/compressed/showdown.js",
            "../assets/vendor/pow2/pow2.js",
            "../bower_components/pixi/bin/pixi.dev.js",
            "http://ajax.googleapis.com/ajax/libs/angularjs/1.2.12/angular.min.js",
            platform,
            "../build/pow-edit.js",
            "../build/pow-edit.ui.js"
        ],function(){
            angular.bootstrap(document, ["PowEdit"]);
        });
    };
</script>
</body>
</html>
